{
  "info": {
    "_postman_id": "1735f662-c50b-4954-b10c-e801aab752ff",
    "name": "FinternetHackathonPG",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "47458605",
    "_collection_link": "https://go.postman.co/collection/47458605-1735f662-c50b-4954-b10c-e801aab752ff?source=collection_link"
  },
  "item": [
    {
      "name": "Get Escrow Details from Payment Intents",
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "GET",
        "header": [
          {
            "key": "x-api-key",
            "value": "sk_hackathon_a049e92eddaf76c08312752ff7888ae4"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{LOCAL}}/api/v1/payment-intents/intent_7a3e92fc-e38d-4217-bc1f-c14a7e159ac1/escrow",
          "host": [
            "{{LOCAL}}"
          ],
          "path": [
            "api",
            "v1",
            "payment-intents",
            "intent_7a3e92fc-e38d-4217-bc1f-c14a7e159ac1",
            "escrow"
          ]
        },
        "description": "## üìå Endpoint\n\n```\nGET /api/v1/payment-intents/:intentId/escrow\n\n ```\n\n---\n\n## üîê Authentication\n\nAdd the following header:\n\n| Key | Value |\n| --- | --- |\n| X-API-Key | {{API_KEY}} |\n\n- Requires merchant API key\n    \n- Returns `invalid_api_key` if missing/invalid\n    \n\n---\n\n## ‚úÖ Path Parameters\n\n| Name | Description |\n| --- | --- |\n| intentId | ID of the payment intent you want escrow details for (e.g., `intent_123abc`) |\n\n---\n\n## üîç Success Response (200)\n\n``` json\n{\n  \"id\": \"<escrow-order-id>\",\n  \"object\": \"escrow_order\",\n  \"data\": {\n    \"id\": \"<escrow-order-id>\",\n    \"orderId\": \"<contract-order-id>\",\n    \"merchantId\": \"<merchant-id>\",\n    \"status\": \"PENDING\",\n    \"tokenAddress\": \"...\",\n    \"amount\": \"...\",\n    \"deliveryDeadline\": \"...\",\n    \"autoReleaseOnProof\": false,\n    \"deliveryProofs\": [ ... ],\n    \"milestones\": [ ... ],\n    \"settlementExecution\": { ... }\n  }\n}\n\n ```\n\n**Response includes:**\n\n- Complete escrow order record\n    \n- Associated delivery proofs\n    \n- Milestones\n    \n- Settlement state\n    \n\n---\n\n## üìù Example Request\n\n```\nGET {{API_BASE_URL}}/api/v1/payment-intents/intent_123abc/escrow\nX-API-Key: {{API_KEY}}\n\n ```\n\n---\n\n## ‚ùå Error Responses\n\n### Missing or Invalid API Key (401)\n\n``` json\n{\n  \"code\": \"invalid_api_key\",\n  \"message\": \"Invalid API key. The provided key does not exist.\"\n}\n\n ```\n\n### Intent Not Found (404)\n\n``` json\n{\n  \"code\": \"resource_missing\",\n  \"message\": \"Payment intent not found\"\n}\n\n ```\n\n### Escrow Not Created\n\n``` json\n{\n  \"code\": \"resource_missing\",\n  \"message\": \"Escrow order not found for this payment intent\"\n}\n\n ```"
      },
      "response": []
    },
    {
      "name": "Submit Delivery Proof - DVP",
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "POST",
        "header": [
          {
            "key": "x-api-key",
            "value": "sk_hackathon_a049e92eddaf76c08312752ff7888ae4"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"proofHash\": \"0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890\",\n    \"proofURI\": \"https://example.com/delivery-proofs/ORD-123\",\n    \"submittedBy\": \"0x5D478B369769183F05b70bb7a609751c419b4c04\"\n  }",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{LOCAL}}/api/v1/payment-intents/intent_7a3e92fc-e38d-4217-bc1f-c14a7e159ac1/escrow/delivery-proof",
          "host": [
            "{{LOCAL}}"
          ],
          "path": [
            "api",
            "v1",
            "payment-intents",
            "intent_7a3e92fc-e38d-4217-bc1f-c14a7e159ac1",
            "escrow",
            "delivery-proof"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Create-PaymentIntent ( Fiat ) Version -[Active]",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-API-Key",
            "value": "sk_test_42306ed4ddf18917f9c7c1af4a651906"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"amount\": \"0.01\",\n    \"currency\": \"USD\",\n    \"type\": \"DELIVERY_VS_PAYMENT\",\n    \"settlementMethod\": \"OFF_RAMP_MOCK\",\n    \"settlementDestination\": \"bank_account_123\",\n    \"description\": \"Test Order #123\"\n  }",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/v1/payment-intents",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "v1",
            "payment-intents"
          ]
        },
        "description": "## üìå Endpoint\n\n```\nPOST {{API_BASE_URL}}/api/v1/payment-intents\n\n ```\n\n---\n\n## üîê Authentication\n\nAdd the following header:\n\n| Key | Value |\n| --- | --- |\n| X-API-Key | {{API_KEY}} |\n\nRequests without a valid API key will return:\n\n``` json\n{\n  \"code\": \"invalid_api_key\",\n  \"message\": \"Invalid API key. The provided key does not exist.\"\n}\n\n ```\n\n---\n\n## üì¶ Request Body\n\n**Content-Type:** `application/json`\n\n| Field | Type | Required | Description |\n| --- | --- | --- | --- |\n| amount | string | ‚úÖ | Transaction amount (e.g. \"0.01\") |\n| currency | string | ‚úÖ | Currency code (e.g. \"USD\") |\n| type | string | ‚úÖ | `DELIVERY_VS_PAYMENT` or `CONSENTED_PULL` |\n| settlementMethod | string | ‚ùå | e.g. \"OFF_RAMP_MOCK\" |\n| settlementDestination | string | ‚ùå | e.g. \"bank_account_123\" |\n| description | string | ‚ùå | Free-form transaction description |\n| metadata | object | ‚ùå | Escrow / delivery configuration |\n\n---\n\n## üîπ Example: Basic Payment Intent\n\n``` json\n{\n  \"amount\": \"10.00\",\n  \"currency\": \"USD\",\n  \"type\": \"CONSENTED_PULL\",\n  \"description\": \"Test payment intent\"\n}\n\n ```\n\n---\n\n## üîπ Example: Escrow / Delivery-vs-Payment Intent\n\n``` json\n{\n  \"amount\": \"25.00\",\n  \"currency\": \"USD\",\n  \"type\": \"DELIVERY_VS_PAYMENT\",\n  \"settlementMethod\": \"OFF_RAMP_MOCK\",\n  \"settlementDestination\": \"bank_account_123\",\n  \"description\": \"Escrowed delivery payment\",\n  \"metadata\": {\n    \"deliveryPeriod\": \"72h\",\n    \"expectedDeliveryHash\": \"0xabc123...\",\n    \"autoRelease\": true,\n    \"deliveryOracle\": \"oracle_xxx\"\n  }\n}\n\n ```\n\n---\n\n## ‚úÖ Success Response (201)\n\n``` json\n{\n  \"object\": \"payment_intent\",\n  \"data\": {\n    \"id\": \"intent_xxx\",\n    \"status\": \"INITIATED\",\n    \"amount\": \"25.00\",\n    \"currency\": \"USD\",\n    \"type\": \"DELIVERY_VS_PAYMENT\",\n    \"contractAddress\": \"0x...\",\n    \"paymentUrl\": \"https://pay.example.com/intent_xxx\",\n    \"metadata\": {\n      \"deliveryPeriod\": \"72h\",\n      \"autoRelease\": true\n    }\n  }\n}\n\n ```\n\n### üß† Notes\n\n- `status` always starts as `INITIATED`\n    \n- `contractAddress` is auto-selected based on:\n    \n    - `dvpContractAddress` (DELIVERY_VS_PAYMENT)\n        \n    - `consentedPullContractAddress` (CONSENTED_PULL)\n        \n- `paymentUrl` is used by frontend clients to complete payment\n    \n\n---\n\n## ‚ùå Error Responses\n\n### Missing or Invalid API Key (401)\n\n``` json\n{\n  \"code\": \"invalid_api_key\",\n  \"message\": \"Invalid API key. The provided key does not exist.\"\n}\n\n ```\n\n### Missing Required Fields (400)\n\n``` json\n{\n  \"statusCode\": 400,\n  \"message\": [\n    \"amount should not be empty\",\n    \"currency should not be empty\"\n  ],\n  \"error\": \"Bad Request\"\n}\n\n ```\n\n### Invalid Payment Type (400)\n\n``` json\n{\n  \"statusCode\": 400,\n  \"message\": [\n    \"type must be one of the following values: DELIVERY_VS_PAYMENT, CONSENTED_PULL\"\n  ],\n  \"error\": \"Bad Request\"\n}\n\n ```\n\n### Merchant Disabled\n\n``` json\n{\n  \"code\": \"invalid_request_error\",\n  \"message\": \"Merchant is disabled\"\n}\n\n ```"
      },
      "response": []
    },
    {
      "name": "Get Balance of a Merchant",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "X-API-Key",
            "value": "sk_hackathon_7239d63daad2da6a01f8d50e41d0995b"
          }
        ],
        "url": {
          "raw": "http://localhost:3000/api/v1/payment-intents/account/balance",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "v1",
            "payment-intents",
            "account",
            "balance"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Get Account Ledger Entries",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "X-API-Key",
            "value": "sk_test_31e8b42bab1ffa5179ed16a92e9eed15",
            "type": "text"
          }
        ],
        "url": {
          "raw": "http://localhost:3000/api/v1/payment-intents/account/ledger-entries?limit=20&offset=0",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "v1",
            "payment-intents",
            "account",
            "ledger-entries"
          ],
          "query": [
            {
              "key": "limit",
              "value": "20"
            },
            {
              "key": "offset",
              "value": "0"
            }
          ]
        }
      },
      "response": [
        {
          "name": "Get Account Ledger Entries",
          "originalRequest": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "sk_test_31e8b42bab1ffa5179ed16a92e9eed15",
                "type": "text"
              }
            ],
            "url": {
              "raw": "http://localhost:3000/api/v1/payment-intents/account/ledger-entries?limit=20&offset=0",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "v1",
                "payment-intents",
                "account",
                "ledger-entries"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            }
          },
          "_postman_previewlanguage": null,
          "header": null,
          "cookie": [],
          "body": null
        }
      ]
    },
    {
      "name": "Create Payment Intent - Milestone",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "X-API-Key",
            "value": "sk_test_31e8b42bab1ffa5179ed16a92e9eed15"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"amount\": \"3000.00\",\n    \"currency\": \"USD\",\n    \"type\": \"DELIVERY_VS_PAYMENT\",\n    \"settlementMethod\": \"OFF_RAMP_TO_RTP\",\n    \"settlementDestination\": \"9876543210\",\n    \"metadata\": {\n        \"releaseType\": \"MILESTONE_LOCKED\"\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/v1/payment-intents",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "v1",
            "payment-intents"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Create Milestones for Payment Intent",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "X-API-Key",
            "value": "sk_test_31e8b42bab1ffa5179ed16a92e9eed15"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"milestoneIndex\": 0,\n    \"description\": \"Phase 1\",\n    \"amount\": \"0.000034\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/v1/payment-intents/intent_3dd55d3c-f51b-4300-9c6e-88819e6043c8/escrow/milestones",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "v1",
            "payment-intents",
            "intent_3dd55d3c-f51b-4300-9c6e-88819e6043c8",
            "escrow",
            "milestones"
          ]
        }
      },
      "response": []
    },
    {
      "name": "GET Payment Intent ",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "X-API-Key",
            "value": "sk_test_31e8b42bab1ffa5179ed16a92e9eed15"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"milestoneIndex\": 0,\n    \"description\": \"Phase 1\",\n    \"amount\": \"1000.00\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/v1/payment-intents/intent_3dd55d3c-f51b-4300-9c6e-88819e6043c8/escrow/milestones",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "v1",
            "payment-intents",
            "intent_3dd55d3c-f51b-4300-9c6e-88819e6043c8",
            "escrow",
            "milestones"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Local API - Create Payment Intent",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Idempotency-Key",
            "value": "{{$timestamp}}_{{$randomUUID}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"amount\": \"10.00\",\n  \"currency\": \"USDC\",\n  \"type\": \"CONDITIONAL\",\n  \"settlementMethod\": \"OFF_RAMP_MOCK\",\n  \"settlementDestination\": \"test_account\",\n  \"description\": \"Test payment\",\n  \"metadata\": {\n    \"orderId\": \"order_123\"\n  }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/payments/create-intent",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "payments", "create-intent"]
        },
        "description": "Creates a new payment intent through the local API.\n\n## Request Body\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| amount | string | Yes | Payment amount (e.g., \"10.00\") |\n| currency | string | Yes | USDC, USDT, ETH, BTC |\n| type | string | Yes | CONDITIONAL, IMMEDIATE, ESCROW |\n| settlementMethod | string | Yes | OFF_RAMP_MOCK, OFF_RAMP_LIVE, WALLET_TRANSFER, BANK_TRANSFER |\n| settlementDestination | string | Yes | Destination account |\n| description | string | No | Optional description |\n| metadata | object | No | Additional metadata |"
      },
      "response": []
    },
    {
      "name": "Local API - Get Payment Status",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/payments/status/:paymentIntentId",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "payments", "status", ":paymentIntentId"],
          "variable": [
            {
              "key": "paymentIntentId",
              "value": "pi_xxx123",
              "description": "The payment intent ID to check"
            }
          ]
        },
        "description": "Retrieves the current status of a payment intent.\n\n## Path Parameters\n\n| Name | Description |\n|------|-------------|\n| paymentIntentId | The ID of the payment intent |"
      },
      "response": []
    },
    {
      "name": "Local API - Cancel Payment",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/payments/status/:paymentIntentId",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "payments", "status", ":paymentIntentId"],
          "variable": [
            {
              "key": "paymentIntentId",
              "value": "pi_xxx123",
              "description": "The payment intent ID to cancel"
            }
          ]
        },
        "description": "Cancels a payment intent.\n\n## Path Parameters\n\n| Name | Description |\n|------|-------------|\n| paymentIntentId | The ID of the payment intent to cancel |"
      },
      "response": []
    },
    {
      "name": "Local API - API Documentation",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/payments/create-intent",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "payments", "create-intent"]
        },
        "description": "Returns the API documentation for the create-intent endpoint."
      },
      "response": []
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "LOCAL",
      "value": "https://api.fmm.finternetlab.io",
      "type": "default"
    },
    {
      "key": "API_KEY",
      "value": "sk_hackathon_09bb540f40ac06e0e57b91adf34706de",
      "type": "secret"
    }
  ]
}