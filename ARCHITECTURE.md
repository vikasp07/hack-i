# ğŸ—ï¸ Restoration API Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FRONTEND (React/Next.js)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   Map View   â”‚  â”‚  Dashboard   â”‚  â”‚ Drought Mon. â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                  â”‚                  â”‚                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                            â”‚                                      â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                   â”‚  React Hooks    â”‚                            â”‚
â”‚                   â”‚  - useRestorationâ”‚                           â”‚
â”‚                   â”‚  - useDrought   â”‚                            â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   HTTP Request  â”‚
                    â”‚  GET/POST       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  NEXT.JS API ROUTES (Backend)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         /app/api/restoration/route.ts                     â”‚   â”‚
â”‚  â”‚  - Input validation                                        â”‚   â”‚
â”‚  â”‚  - Request handling (GET/POST)                            â”‚   â”‚
â”‚  â”‚  - Response formatting                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                        â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                  â”‚  Data Service   â”‚                              â”‚
â”‚                  â”‚  Orchestrator   â”‚                              â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                           â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚         â”‚                 â”‚                 â”‚                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”               â”‚
â”‚    â”‚Geocodingâ”‚      â”‚ Weather â”‚      â”‚  Soil   â”‚               â”‚
â”‚    â”‚Function â”‚      â”‚Function â”‚      â”‚Function â”‚               â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚                 â”‚                 â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â”‚                 â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL APIs (Free/Paid)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Nominatim   â”‚  â”‚ OpenWeather  â”‚  â”‚  SoilGrids   â”‚           â”‚
â”‚  â”‚  (Geocoding) â”‚  â”‚  (Weather)   â”‚  â”‚   (Soil)     â”‚           â”‚
â”‚  â”‚    FREE      â”‚  â”‚  Free Tier   â”‚  â”‚    FREE      â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚     GFW      â”‚  â”‚     GBIF     â”‚  â”‚   Mapbox     â”‚           â”‚
â”‚  â”‚  (Forest)    â”‚  â”‚  (Species)   â”‚  â”‚ (Geocoding)  â”‚           â”‚
â”‚  â”‚  Free Tier   â”‚  â”‚    FREE      â”‚  â”‚  Optional    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### Request Flow
```
User Action
    â”‚
    â”œâ”€â†’ Click Map / Enter Location
    â”‚
    â”œâ”€â†’ React Component
    â”‚       â”‚
    â”‚       â”œâ”€â†’ useRestorationData({ lat, lon })
    â”‚       â”‚
    â”‚       â””â”€â†’ fetch('/api/restoration?lat=X&lon=Y')
    â”‚
    â”œâ”€â†’ Next.js API Route
    â”‚       â”‚
    â”‚       â”œâ”€â†’ Validate Input
    â”‚       â”‚
    â”‚       â””â”€â†’ Call fetchRestorationData()
    â”‚
    â”œâ”€â†’ Data Service Layer
    â”‚       â”‚
    â”‚       â”œâ”€â†’ Parallel API Calls
    â”‚       â”‚   â”œâ”€â†’ fetchWeather()
    â”‚       â”‚   â”œâ”€â†’ fetchSoil()
    â”‚       â”‚   â”œâ”€â†’ fetchNDVI()
    â”‚       â”‚   â”œâ”€â†’ fetchForestCover()
    â”‚       â”‚   â”œâ”€â†’ fetchCarbon()
    â”‚       â”‚   â””â”€â†’ fetchSpecies()
    â”‚       â”‚
    â”‚       â”œâ”€â†’ Compute Drought Index
    â”‚       â”‚
    â”‚       â””â”€â†’ Generate Restoration Zones
    â”‚
    â”œâ”€â†’ Aggregate Results
    â”‚
    â””â”€â†’ Return JSON Response
            â”‚
            â””â”€â†’ Display in UI
```

### Response Flow
```
External APIs
    â”‚
    â”œâ”€â†’ Weather Data (OpenWeather)
    â”œâ”€â†’ Soil Data (SoilGrids)
    â”œâ”€â†’ Forest Data (GFW)
    â”œâ”€â†’ Species Data (GBIF)
    â”‚
    â””â”€â†’ Data Service Aggregation
            â”‚
            â”œâ”€â†’ Normalize Data
            â”œâ”€â†’ Calculate Metrics
            â”œâ”€â†’ Generate Zones
            â”‚
            â””â”€â†’ Unified Response Object
                    â”‚
                    â””â”€â†’ {
                          coordinates,
                          weather,
                          soil,
                          ndvi,
                          forest_cover,
                          carbon,
                          species,
                          drought_index,
                          restoration_zones
                        }
```

## Component Architecture

### Frontend Components
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         App Component Tree              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      RestorationDashboard      â”‚    â”‚
â”‚  â”‚  - Main container              â”‚    â”‚
â”‚  â”‚  - Coordinates state           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚             â”‚                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚    â”‚        â”‚        â”‚                  â”‚
â”‚  â”Œâ”€â–¼â”€â”€â”  â”Œâ”€â–¼â”€â”€â”  â”Œâ”€â–¼â”€â”€â”              â”‚
â”‚  â”‚Map â”‚  â”‚Dataâ”‚  â”‚Zonesâ”‚              â”‚
â”‚  â”‚Viewâ”‚  â”‚Panelâ”‚  â”‚List â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Backend Services
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Service Layer Structure           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  fetchRestorationData()                 â”‚
â”‚         â”‚                                â”‚
â”‚         â”œâ”€â†’ fetchCoordinates()          â”‚
â”‚         â”‚   â”œâ”€â†’ Mapbox API              â”‚
â”‚         â”‚   â””â”€â†’ Nominatim API           â”‚
â”‚         â”‚                                â”‚
â”‚         â”œâ”€â†’ fetchWeather()              â”‚
â”‚         â”‚   â””â”€â†’ OpenWeather API         â”‚
â”‚         â”‚                                â”‚
â”‚         â”œâ”€â†’ fetchSoil()                 â”‚
â”‚         â”‚   â””â”€â†’ SoilGrids API           â”‚
â”‚         â”‚                                â”‚
â”‚         â”œâ”€â†’ fetchNDVI()                 â”‚
â”‚         â”‚   â””â”€â†’ Computed from forest    â”‚
â”‚         â”‚                                â”‚
â”‚         â”œâ”€â†’ fetchForestCover()          â”‚
â”‚         â”‚   â””â”€â†’ GFW API                 â”‚
â”‚         â”‚                                â”‚
â”‚         â”œâ”€â†’ fetchCarbon()               â”‚
â”‚         â”‚   â””â”€â†’ Computed from biomass   â”‚
â”‚         â”‚                                â”‚
â”‚         â”œâ”€â†’ fetchSpecies()              â”‚
â”‚         â”‚   â”œâ”€â†’ GBIF API                â”‚
â”‚         â”‚   â””â”€â†’ Regional database       â”‚
â”‚         â”‚                                â”‚
â”‚         â”œâ”€â†’ computeDroughtIndex()       â”‚
â”‚         â”‚   â””â”€â†’ Multi-factor formula    â”‚
â”‚         â”‚                                â”‚
â”‚         â””â”€â†’ generateRestorationZones()  â”‚
â”‚             â””â”€â†’ Algorithm-based         â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Organization

```
habitat-dashboard/
â”‚
â”œâ”€â”€ app/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ restoration/
â”‚           â””â”€â”€ route.ts              â† API Endpoint
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ dataService.ts            â† Core Logic
â”‚   â”‚       â”œâ”€â”€ fetchCoordinates()
â”‚   â”‚       â”œâ”€â”€ fetchWeather()
â”‚   â”‚       â”œâ”€â”€ fetchSoil()
â”‚   â”‚       â”œâ”€â”€ fetchNDVI()
â”‚   â”‚       â”œâ”€â”€ fetchForestCover()
â”‚   â”‚       â”œâ”€â”€ fetchCarbon()
â”‚   â”‚       â”œâ”€â”€ fetchSpecies()
â”‚   â”‚       â”œâ”€â”€ computeDroughtIndex()
â”‚   â”‚       â”œâ”€â”€ generateRestorationZones()
â”‚   â”‚       â””â”€â”€ fetchRestorationData()
â”‚   â”‚
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ restoration.ts            â† Type Definitions
â”‚           â”œâ”€â”€ Coordinates
â”‚           â”œâ”€â”€ WeatherData
â”‚           â”œâ”€â”€ SoilData
â”‚           â”œâ”€â”€ CarbonData
â”‚           â”œâ”€â”€ SpeciesData
â”‚           â”œâ”€â”€ RestorationZone
â”‚           â””â”€â”€ RestorationData
â”‚
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ use-restoration-data.ts       â† React Hooks
â”‚       â”œâ”€â”€ useRestorationData()
â”‚       â”œâ”€â”€ useRestorationDataPost()
â”‚       â”œâ”€â”€ useDroughtMonitor()
â”‚       â””â”€â”€ useLocationComparison()
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ RESTORATION_API.md
    â”œâ”€â”€ INTEGRATION_GUIDE.md
    â”œâ”€â”€ QUICK_START_RESTORATION.md
    â””â”€â”€ ARCHITECTURE.md               â† This file
```

## API Endpoint Design

### GET /api/restoration
```
Request:
  Query Params:
    - lat: number (required if no location)
    - lon: number (required if no location)
    - location: string (required if no lat/lon)

Response:
  {
    success: boolean
    timestamp: string
    data: RestorationData
  }

Status Codes:
  200 - Success
  400 - Bad Request (invalid params)
  500 - Server Error
```

### POST /api/restoration
```
Request:
  Body:
    {
      lat?: number
      lon?: number
      location?: string
    }

Response:
  Same as GET

Status Codes:
  Same as GET
```

## Error Handling Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Error Handling Flow             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  API Call                                â”‚
â”‚     â”‚                                    â”‚
â”‚     â”œâ”€â†’ Try External API                â”‚
â”‚     â”‚      â”‚                             â”‚
â”‚     â”‚      â”œâ”€â†’ Success â†’ Return Data    â”‚
â”‚     â”‚      â”‚                             â”‚
â”‚     â”‚      â””â”€â†’ Fail                      â”‚
â”‚     â”‚           â”‚                        â”‚
â”‚     â”‚           â”œâ”€â†’ Log Warning          â”‚
â”‚     â”‚           â”‚                        â”‚
â”‚     â”‚           â””â”€â†’ Return Mock Data    â”‚
â”‚     â”‚                                    â”‚
â”‚     â””â”€â†’ Catch Error                     â”‚
â”‚            â”‚                             â”‚
â”‚            â”œâ”€â†’ Log Error                 â”‚
â”‚            â”‚                             â”‚
â”‚            â””â”€â†’ Return Fallback          â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Caching Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Caching Layers                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  Level 1: Next.js Built-in              â”‚
â”‚  â”œâ”€â†’ fetch() with revalidate            â”‚
â”‚  â”œâ”€â†’ Weather: 1 hour                    â”‚
â”‚  â”œâ”€â†’ Soil: 24 hours                     â”‚
â”‚  â””â”€â†’ Species: 7 days                    â”‚
â”‚                                          â”‚
â”‚  Level 2: API Route Cache               â”‚
â”‚  â”œâ”€â†’ Cache-Control headers              â”‚
â”‚  â””â”€â†’ s-maxage=3600                      â”‚
â”‚                                          â”‚
â”‚  Level 3: Client-side (Optional)        â”‚
â”‚  â”œâ”€â†’ React Query                        â”‚
â”‚  â”œâ”€â†’ SWR                                â”‚
â”‚  â””â”€â†’ Custom cache                       â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Optimization

### Parallel Processing
```
fetchRestorationData()
    â”‚
    â””â”€â†’ Promise.all([
          fetchWeather(),      â”€â”
          fetchSoil(),          â”‚
          fetchNDVI(),          â”œâ”€â†’ Parallel
          fetchForestCover(),   â”‚   Execution
          fetchCarbon(),        â”‚
          fetchSpecies()       â”€â”˜
        ])
    â”‚
    â””â”€â†’ Sequential Processing
        â”œâ”€â†’ computeDroughtIndex()
        â””â”€â†’ generateRestorationZones()
```

### Response Time Breakdown
```
Total: 2-5 seconds

â”œâ”€â†’ Geocoding: 200-500ms
â”œâ”€â†’ Parallel APIs: 1-3s
â”‚   â”œâ”€â†’ Weather: 300-800ms
â”‚   â”œâ”€â†’ Soil: 500-1000ms
â”‚   â”œâ”€â†’ Forest: 400-900ms
â”‚   â””â”€â†’ Species: 600-1200ms
â”œâ”€â†’ Computation: 50-100ms
â””â”€â†’ Response: 50-100ms
```

## Security Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Security Measures               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  1. Input Validation                    â”‚
â”‚     â”œâ”€â†’ Coordinate range checks         â”‚
â”‚     â”œâ”€â†’ Type validation                 â”‚
â”‚     â””â”€â†’ Sanitization                    â”‚
â”‚                                          â”‚
â”‚  2. API Key Protection                  â”‚
â”‚     â”œâ”€â†’ Server-side only                â”‚
â”‚     â”œâ”€â†’ Environment variables           â”‚
â”‚     â””â”€â†’ Never exposed to client         â”‚
â”‚                                          â”‚
â”‚  3. Rate Limiting                       â”‚
â”‚     â”œâ”€â†’ Per-IP limits                   â”‚
â”‚     â”œâ”€â†’ API quota management            â”‚
â”‚     â””â”€â†’ Graceful degradation            â”‚
â”‚                                          â”‚
â”‚  4. Error Messages                      â”‚
â”‚     â”œâ”€â†’ Generic client errors           â”‚
â”‚     â”œâ”€â†’ Detailed server logs            â”‚
â”‚     â””â”€â†’ No sensitive data leaks         â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Scalability

### Horizontal Scaling
```
Load Balancer
    â”‚
    â”œâ”€â†’ Next.js Instance 1
    â”œâ”€â†’ Next.js Instance 2
    â””â”€â†’ Next.js Instance 3
            â”‚
            â””â”€â†’ Shared Cache (Redis)
                    â”‚
                    â””â”€â†’ External APIs
```

### Vertical Scaling
```
Single Instance
    â”‚
    â”œâ”€â†’ Increase Memory
    â”œâ”€â†’ More CPU Cores
    â””â”€â†’ Better Network
```

## Monitoring & Logging

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Monitoring Points               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  1. API Endpoint                        â”‚
â”‚     â”œâ”€â†’ Request count                   â”‚
â”‚     â”œâ”€â†’ Response time                   â”‚
â”‚     â”œâ”€â†’ Error rate                      â”‚
â”‚     â””â”€â†’ Status codes                    â”‚
â”‚                                          â”‚
â”‚  2. External APIs                       â”‚
â”‚     â”œâ”€â†’ Success rate                    â”‚
â”‚     â”œâ”€â†’ Latency                         â”‚
â”‚     â”œâ”€â†’ Quota usage                     â”‚
â”‚     â””â”€â†’ Fallback triggers               â”‚
â”‚                                          â”‚
â”‚  3. Data Quality                        â”‚
â”‚     â”œâ”€â†’ Mock vs real data ratio         â”‚
â”‚     â”œâ”€â†’ Data completeness               â”‚
â”‚     â””â”€â†’ Validation failures             â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Architecture

### Development
```
Local Machine
    â”‚
    â””â”€â†’ npm run dev
        â””â”€â†’ localhost:3000
```

### Production (Vercel)
```
GitHub Repo
    â”‚
    â””â”€â†’ Vercel Deploy
        â”œâ”€â†’ Build
        â”œâ”€â†’ Environment Variables
        â””â”€â†’ Edge Network
            â””â”€â†’ Global CDN
```

### Production (Self-hosted)
```
Server
    â”‚
    â”œâ”€â†’ Docker Container
    â”‚   â””â”€â†’ Next.js App
    â”‚
    â”œâ”€â†’ Nginx Reverse Proxy
    â”‚
    â””â”€â†’ SSL Certificate
```

## Future Enhancements

```
Phase 1 (Current)
â”œâ”€â†’ Basic API integration
â”œâ”€â†’ Mock data fallbacks
â””â”€â†’ React hooks

Phase 2 (Next)
â”œâ”€â†’ Redis caching
â”œâ”€â†’ Rate limiting
â””â”€â†’ Advanced monitoring

Phase 3 (Future)
â”œâ”€â†’ WebSocket real-time updates
â”œâ”€â†’ Machine learning predictions
â””â”€â†’ Historical data analysis
```

---

**This architecture provides a solid foundation for a scalable, maintainable, and performant forest restoration platform.**
